<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Tugas Besar UTS IN253 Grafika Komputer</title>
		<link rel="stylesheet" href="css/style.css" />
		<script src="js/grafika_lib.js"></script>
		<script src="js/transform.js"></script>
		<script src="js/transformasi_matriks.js"></script>
	</head>
	<body>
		<h1>Tugas Besar UTS IN253 Grafika Komputer</h1>
		<canvas id="canvas1" width="600" height="600"></canvas>
		<script>
			const canvas = document.getElementById("canvas1");
			const context = canvas.getContext("2d");
			const boxSize = 20;
			const points = [];

			function polygon(context, points, fill = false, stroke = true) {
				if (points.length < 2) return;
				context.beginPath();
				context.moveTo(points[0].x, points[0].y);
				for (let i = 1; i < points.length; i++) {
					context.lineTo(points[i].x, points[i].y);
				}
				context.closePath();
				if (fill) context.fill();
				if (stroke) context.stroke();
			}

			function polyline(context, points, stroke = true) {
				if (points.length < 2) return;
				context.beginPath();
				context.moveTo(points[0].x, points[0].y);
				for (let i = 1; i < points.length; i++) {
					context.lineTo(points[i].x, points[i].y);
				}
				if (stroke) context.stroke();
			}

			function drawBox(x, y) {
				context.fillStyle = "green";
				context.fillRect(x - boxSize / 2, y - boxSize / 2, boxSize, boxSize);
				points.push({ x, y });
			}

			function redrawCanvas() {
				context.clearRect(0, 0, canvas.width, canvas.height);

				context.fillStyle = "green";
				points.forEach((point) => {
					context.fillRect(
						point.x - boxSize / 2,
						point.y - boxSize / 2,
						boxSize,
						boxSize
					);
				});

				if (points.length >= 2) {
					context.strokeStyle = "black";
					context.lineWidth = 2;
					polyline(context, points);
				}
			}

			canvas.addEventListener("click", (event) => {
				const rect = canvas.getBoundingClientRect();
				const x = event.clientX - rect.left;
				const y = event.clientY - rect.top;
				drawBox(x, y);
				redrawCanvas();
			});
		</script>
	</body>
</html>
