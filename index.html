<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Tugas Besar UTS IN253 Grafika Komputer</title>
		<link rel="stylesheet" href="css/style.css" />
		<script src="js/grafika_lib.js"></script>
		<script src="js/transform.js"></script>
		<script src="js/transformasi_matriks.js"></script>
	</head>
	<body>
		<h1>Tugas Besar UTS IN253 Grafika Komputer</h1>
		<canvas id="canvas1" width="600" height="600"></canvas>
		<script>
			// Inisiasi canvas
			const canvas = document.getElementById("canvas1");
			const context = canvas.getContext("2d");
			const boxSize = 20;
			const points = [];
			// Inisiasi canvas

			// Fungsi Polygon
			function polygon(context, points, fill = false, stroke = true) {
				if (points.length < 2) return;
				context.beginPath();
				context.moveTo(points[0].x, points[0].y);
				for (let i = 1; i < points.length; i++) {
					context.lineTo(points[i].x, points[i].y);
				}
				context.closePath();
				if (fill) context.fill();
				if (stroke) context.stroke();
			}
			// Fungsi Polygon

			// Fungsi Polyline
			function polyline(context, points, stroke = true) {
				if (points.length < 2) return;
				context.beginPath();
				context.moveTo(points[0].x, points[0].y);
				for (let i = 1; i < points.length; i++) {
					context.lineTo(points[i].x, points[i].y);
				}
				if (stroke) context.stroke();
			}
			// Fungsi Polyline

			// Fungsi gambar kotak
			function drawBox(x, y) {
				context.fillStyle = "green";
				context.fillRect(x - boxSize / 2, y - boxSize / 2, boxSize, boxSize);
			
				// Gambar node
				const label = points.length + 1;
				points.push({ x, y, label });
			
				// Gambar angka
				context.fillStyle = "white";
				context.font = "12px Arial";
				context.textAlign = "center";
				context.textBaseline = "middle";
				context.fillText(label, x, y);

			}
			// Fungsi gambar kotak

			
			//fungsi menggambar ulang canvas
			function redrawCanvas() {
				context.clearRect(0, 0, canvas.width, canvas.height);

				// Gambar semua kotak dan label
				points.forEach((point) => {
					context.fillStyle = "green";
					context.fillRect(
						point.x - boxSize / 2,
						point.y - boxSize / 2,
						boxSize,
						boxSize
					);
			
					context.fillStyle = "white";
					context.font = "12px Arial";
					context.textAlign = "center";
					context.textBaseline = "middle";
					context.fillText(point.label, point.x, point.y);
				});
			
				// Gambar garis antar node
				if (points.length >= 2) {
					context.strokeStyle = "black";
					context.lineWidth = 2;
					polyline(context, points);
				}
			}
			//fungsi menggambar ulang canvas

			// Script untuk Event
			canvas.addEventListener("click", (event) => { //Mendapatkan event dari click
				const rect = canvas.getBoundingClientRect();
				const x = event.clientX - rect.left;
				const y = event.clientY - rect.top;
				drawBox(x, y); //gambar kotak pada posisi klik
				redrawCanvas(); //gambar ulang seluruh canvas
			});
		</script>
	</body>
</html>
